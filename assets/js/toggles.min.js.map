{"version":3,"file":"toggles.min.js","sources":["toggles.min.js"],"sourcesContent":["/*\t-----------------------------------------------------------------------------------------------\n\tNamespace\n--------------------------------------------------------------------------------------------------- */\n\nvar azad = azad || {};\n\n// Set a default value for scrolled.\nazad.scrolled = 0;\n\n// polyfill closest\n// https://developer.mozilla.org/en-US/docs/Web/API/Element/closest#Polyfill\nif ( ! Element.prototype.closest ) {\n\tElement.prototype.closest = function( s ) {\n\t\tvar el = this;\n\n\t\tdo {\n\t\t\tif ( el.matches( s ) ) {\n\t\t\t\treturn el;\n\t\t\t}\n\n\t\t\tel = el.parentElement || el.parentNode;\n\t\t} while ( el !== null && el.nodeType === 1 );\n\n\t\treturn null;\n\t};\n}\n\n// polyfill forEach\n// https://developer.mozilla.org/en-US/docs/Web/API/NodeList/forEach#Polyfill\nif ( window.NodeList && ! NodeList.prototype.forEach ) {\n\tNodeList.prototype.forEach = function( callback, thisArg ) {\n\t\tvar i;\n\t\tvar len = this.length;\n\n\t\tthisArg = thisArg || window;\n\n\t\tfor ( i = 0; i < len; i++ ) {\n\t\t\tcallback.call( thisArg, this[ i ], i, this );\n\t\t}\n\t};\n}\n\n// event \"polyfill\"\nazad.createEvent = function( eventName ) {\n\tvar event;\n\tif ( typeof window.Event === 'function' ) {\n\t\tevent = new Event( eventName );\n\t} else {\n\t\tevent = document.createEvent( 'Event' );\n\t\tevent.initEvent( eventName, true, false );\n\t}\n\treturn event;\n};\n\n// matches \"polyfill\"\n// https://developer.mozilla.org/es/docs/Web/API/Element/matches\nif ( ! Element.prototype.matches ) {\n\tElement.prototype.matches =\n\t\tElement.prototype.matchesSelector ||\n\t\tElement.prototype.mozMatchesSelector ||\n\t\tElement.prototype.msMatchesSelector ||\n\t\tElement.prototype.oMatchesSelector ||\n\t\tElement.prototype.webkitMatchesSelector ||\n\t\tfunction( s ) {\n\t\t\tvar matches = ( this.document || this.ownerDocument ).querySelectorAll( s ),\n\t\t\t\ti = matches.length;\n\t\t\twhile ( --i >= 0 && matches.item( i ) !== this ) {}\n\t\t\treturn i > -1;\n\t\t};\n}\n\n// Add a class to the body for when touch is enabled for browsers that don't support media queries\n// for interaction media features. Adapted from <https://codepen.io/Ferie/pen/vQOMmO>\nazad.touchEnabled = {\n\n\tinit: function() {\n\t\tvar matchMedia = function() {\n\t\t\t// Include the 'heartz' as a way to have a non matching MQ to help terminate the join. See <https://git.io/vznFH>.\n\t\t\tvar prefixes = [ '-webkit-', '-moz-', '-o-', '-ms-' ];\n\t\t\tvar query = [ '(', prefixes.join( 'touch-enabled),(' ), 'heartz', ')' ].join( '' );\n\t\t\treturn window.matchMedia && window.matchMedia( query ).matches;\n\t\t};\n\n\t\tif ( ( 'ontouchstart' in window ) || ( window.DocumentTouch && document instanceof window.DocumentTouch ) || matchMedia() ) {\n\t\t\tdocument.body.classList.add( 'touch-enabled' );\n\t\t}\n\t}\n}; // azad.touchEnabled\n\n/*\t-----------------------------------------------------------------------------------------------\n\tCover Modals\n--------------------------------------------------------------------------------------------------- */\n\nazad.coverModals = {\n\n\tinit: function() {\n\t\tif ( document.querySelector( '.cover-modal' ) ) {\n\t\t\t// Handle cover modals when they're toggled\n\t\t\tthis.onToggle();\n\n\t\t\t// When toggled, untoggle if visitor clicks on the wrapping element of the modal\n\t\t\tthis.outsideUntoggle();\n\n\t\t\t// Close on escape key press\n\t\t\tthis.closeOnEscape();\n\n\t\t\t// Hide and show modals before and after their animations have played out\n\t\t\tthis.hideAndShowModals();\n\t\t}\n\t},\n\n\t// Handle cover modals when they're toggled\n\tonToggle: function() {\n\t\tdocument.querySelectorAll( '.cover-modal' ).forEach( function( element ) {\n\t\t\telement.addEventListener( 'toggled', function( event ) {\n\t\t\t\tvar modal = event.target,\n\t\t\t\t\tbody = document.body;\n\n\t\t\t\tif ( modal.classList.contains( 'active' ) ) {\n\t\t\t\t\tbody.classList.add( 'showing-modal' );\n\t\t\t\t} else {\n\t\t\t\t\tbody.classList.remove( 'showing-modal' );\n\t\t\t\t\tbody.classList.add( 'hiding-modal' );\n\n\t\t\t\t\t// Remove the hiding class after a delay, when animations have been run\n\t\t\t\t\tsetTimeout( function() {\n\t\t\t\t\t\tbody.classList.remove( 'hiding-modal' );\n\t\t\t\t\t}, 500 );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t},\n\n\t// Close modal on outside click\n\toutsideUntoggle: function() {\n\t\tdocument.addEventListener( 'click', function( event ) {\n\t\t\tvar target = event.target;\n\t\t\tvar modal = document.querySelector( '.cover-modal.active' );\n\t\t\t\n\t\t\t// if target onclick is <a> with # within the href attribute\n\t\t\tif ( event.target.tagName.toLowerCase() === 'a' && event.target.hash.includes( '#' ) && modal !== null ) {\n\t\t\t\t// untoggle the modal\n\t\t\t\tthis.untoggleModal( modal );\n\t\t\t\t// wait 550 and scroll to the anchor\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tvar anchor = document.getElementById( event.target.hash.slice( 1 ) );\n\t\t\t\t\tanchor.scrollIntoView();\n\t\t\t\t}, 550 );\n\t\t\t}\n\n\t\t\tif ( target === modal ) {\n\t\t\t\tthis.untoggleModal( target );\n\t\t\t}\n\t\t}.bind( this ) );\n\t},\n\n\t// Close modal on escape key press\n\tcloseOnEscape: function() {\n\t\tdocument.addEventListener( 'keydown', function( event ) {\n\t\t\tif ( event.keyCode === 27 ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tdocument.querySelectorAll( '.cover-modal.active' ).forEach( function( element ) {\n\t\t\t\t\tthis.untoggleModal( element );\n\t\t\t\t}.bind( this ) );\n\t\t\t}\n\t\t}.bind( this ) );\n\t},\n\n\t// Hide and show modals before and after their animations have played out\n\thideAndShowModals: function() {\n\t\tvar _doc = document,\n\t\t\t_win = window,\n\t\t\tmodals = _doc.querySelectorAll( '.cover-modal' ),\n\t\t\thtmlStyle = _doc.documentElement.style,\n\t\t\tadminBar = _doc.querySelector( '#wpadminbar' );\n\n\t\tfunction getAdminBarHeight( negativeValue ) {\n\t\t\tvar height,\n\t\t\t\tcurrentScroll = _win.pageYOffset;\n\n\t\t\tif ( adminBar ) {\n\t\t\t\theight = currentScroll + adminBar.getBoundingClientRect().height;\n\n\t\t\t\treturn negativeValue ? -height : height;\n\t\t\t}\n\n\t\t\treturn currentScroll === 0 ? 0 : -currentScroll;\n\t\t}\n\n\t\tfunction htmlStyles() {\n\t\t\tvar overflow = _win.innerHeight > _doc.documentElement.getBoundingClientRect().height;\n\n\t\t\treturn {\n\t\t\t\t'overflow-y': overflow ? 'hidden' : 'scroll',\n\t\t\t\tposition: 'fixed',\n\t\t\t\twidth: '100%',\n\t\t\t\ttop: getAdminBarHeight( true ) + 'px',\n\t\t\t\tleft: 0\n\t\t\t};\n\t\t}\n\n\t\t// Show the modal\n\t\tmodals.forEach( function( modal ) {\n\t\t\tmodal.addEventListener( 'toggle-target-before-inactive', function( event ) {\n\t\t\t\tvar styles = htmlStyles(),\n\t\t\t\t\toffsetY = _win.pageYOffset,\n\t\t\t\t\tpaddingTop = ( Math.abs( getAdminBarHeight() ) - offsetY ) + 'px',\n\t\t\t\t\tmQuery = _win.matchMedia( '(max-width: 600px)' );\n\n\t\t\t\tif ( event.target !== modal ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tObject.keys( styles ).forEach( function( styleKey ) {\n\t\t\t\t\thtmlStyle.setProperty( styleKey, styles[ styleKey ] );\n\t\t\t\t} );\n\n\t\t\t\t_win.azad.scrolled = parseInt( styles.top, 10 );\n\n\t\t\t\tif ( adminBar ) {\n\t\t\t\t\t_doc.body.style.setProperty( 'padding-top', paddingTop );\n\n\t\t\t\t\tif ( mQuery.matches ) {\n\t\t\t\t\t\tif ( offsetY >= getAdminBarHeight() ) {\n\t\t\t\t\t\t\tmodal.style.setProperty( 'top', 0 );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmodal.style.setProperty( 'top', ( getAdminBarHeight() - offsetY ) + 'px' );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmodal.classList.add( 'show-modal' );\n\t\t\t} );\n\n\t\t\t// Hide the modal after a delay, so animations have time to play out\n\t\t\tmodal.addEventListener( 'toggle-target-after-inactive', function( event ) {\n\t\t\t\tif ( event.target !== modal ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tsetTimeout( function() {\n\t\t\t\t\tvar clickedEl = azad.toggles.clickedEl;\n\n\t\t\t\t\tmodal.classList.remove( 'show-modal' );\n\n\t\t\t\t\tObject.keys( htmlStyles() ).forEach( function( styleKey ) {\n\t\t\t\t\t\thtmlStyle.removeProperty( styleKey );\n\t\t\t\t\t} );\n\n\t\t\t\t\tif ( adminBar ) {\n\t\t\t\t\t\t_doc.body.style.removeProperty( 'padding-top' );\n\t\t\t\t\t\tmodal.style.removeProperty( 'top' );\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( clickedEl !== false ) {\n\t\t\t\t\t\tclickedEl.focus();\n\t\t\t\t\t\tclickedEl = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t_win.scrollTo( 0, Math.abs( _win.azad.scrolled + getAdminBarHeight() ) );\n\n\t\t\t\t\t_win.azad.scrolled = 0;\n\t\t\t\t}, 500 );\n\t\t\t} );\n\t\t} );\n\t},\n\n\t// Untoggle a modal\n\tuntoggleModal: function( modal ) {\n\t\tvar modalTargetClass,\n\t\t\tmodalToggle = false;\n\n\t\t// If the modal has specified the string (ID or class) used by toggles to target it, untoggle the toggles with that target string\n\t\t// The modal-target-string must match the string toggles use to target the modal\n\t\tif ( modal.dataset.modalTargetString ) {\n\t\t\tmodalTargetClass = modal.dataset.modalTargetString;\n\n\t\t\tmodalToggle = document.querySelector( '*[data-toggle-target=\"' + modalTargetClass + '\"]' );\n\t\t}\n\n\t\t// If a modal toggle exists, trigger it so all of the toggle options are included\n\t\tif ( modalToggle ) {\n\t\t\tmodalToggle.click();\n\n\t\t\t// If one doesn't exist, just hide the modal\n\t\t} else {\n\t\t\tmodal.classList.remove( 'active' );\n\t\t}\n\t}\n\n}; // azad.coverModals\n\n/*\t-----------------------------------------------------------------------------------------------\n\tIntrinsic Ratio Embeds\n--------------------------------------------------------------------------------------------------- */\n\nazad.intrinsicRatioVideos = {\n\n\tinit: function() {\n\t\tthis.makeFit();\n\n\t\twindow.addEventListener( 'resize', function() {\n\t\t\tthis.makeFit();\n\t\t}.bind( this ) );\n\t},\n\n\tmakeFit: function() {\n\t\tdocument.querySelectorAll( 'iframe, object, video' ).forEach( function( video ) {\n\t\t\tvar ratio, iTargetWidth,\n\t\t\t\tcontainer = video.parentNode;\n\n\t\t\t// Skip videos we want to ignore\n\t\t\tif ( video.classList.contains( 'intrinsic-ignore' ) || video.parentNode.classList.contains( 'intrinsic-ignore' ) ) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif ( ! video.dataset.origwidth ) {\n\t\t\t\t// Get the video element proportions\n\t\t\t\tvideo.setAttribute( 'data-origwidth', video.width );\n\t\t\t\tvideo.setAttribute( 'data-origheight', video.height );\n\t\t\t}\n\n\t\t\tiTargetWidth = container.offsetWidth;\n\n\t\t\t// Get ratio from proportions\n\t\t\tratio = iTargetWidth / video.dataset.origwidth;\n\n\t\t\t// Scale based on ratio, thus retaining proportions\n\t\t\tvideo.style.width = iTargetWidth + 'px';\n\t\t\tvideo.style.height = ( video.dataset.origheight * ratio ) + 'px';\n\t\t} );\n\t}\n\n}; // azad.instrinsicRatioVideos\n\n/*\t-----------------------------------------------------------------------------------------------\n\tModal Menu\n--------------------------------------------------------------------------------------------------- */\nazad.modalMenu = {\n\n\tinit: function() {\n\t\t// If the current menu item is in a sub level, expand all the levels higher up on load\n\t\tthis.expandLevel();\n\t\tthis.keepFocusInModal();\n\t},\n\n\texpandLevel: function() {\n\t\tvar modalMenus = document.querySelectorAll( '.modal-menu' );\n\n\t\tmodalMenus.forEach( function( modalMenu ) {\n\t\t\tvar activeMenuItem = modalMenu.querySelector( '.current-menu-item' );\n\n\t\t\tif ( activeMenuItem ) {\n\t\t\t\tazadFindParents( activeMenuItem, 'li' ).forEach( function( element ) {\n\t\t\t\t\tvar subMenuToggle = element.querySelector( '.sub-menu-toggle' );\n\t\t\t\t\tif ( subMenuToggle ) {\n\t\t\t\t\t\tazad.toggles.performToggle( subMenuToggle, true );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t},\n\n\tkeepFocusInModal: function() {\n\t\tvar _doc = document;\n\n\t\t_doc.addEventListener( 'keydown', function( event ) {\n\t\t\tvar toggleTarget, modal, selectors, elements, menuType, bottomMenu, activeEl, lastEl, firstEl, tabKey, shiftKey,\n\t\t\t\tclickedEl = azad.toggles.clickedEl;\n\n\t\t\tif ( clickedEl && _doc.body.classList.contains( 'showing-modal' ) ) {\n\t\t\t\ttoggleTarget = clickedEl.dataset.toggleTarget;\n\t\t\t\tselectors = 'input, a, button';\n\t\t\t\tmodal = _doc.querySelector( toggleTarget );\n\n\t\t\t\telements = modal.querySelectorAll( selectors );\n\t\t\t\telements = Array.prototype.slice.call( elements );\n\n\t\t\t\tif ( '.menu-modal' === toggleTarget ) {\n\t\t\t\t\tmenuType = window.matchMedia( '(min-width: 1000px)' ).matches;\n\t\t\t\t\tmenuType = menuType ? '.expanded-menu' : '.mobile-menu';\n\n\t\t\t\t\telements = elements.filter( function( element ) {\n\t\t\t\t\t\treturn null !== element.closest( menuType ) && null !== element.offsetParent;\n\t\t\t\t\t} );\n\n\t\t\t\t\telements.unshift( _doc.querySelector( '.close-nav-toggle' ) );\n\n\t\t\t\t\tbottomMenu = _doc.querySelector( '.menu-bottom > nav' );\n\n\t\t\t\t\tif ( bottomMenu ) {\n\t\t\t\t\t\tbottomMenu.querySelectorAll( selectors ).forEach( function( element ) {\n\t\t\t\t\t\t\telements.push( element );\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlastEl = elements[ elements.length - 1 ];\n\t\t\t\tfirstEl = elements[0];\n\t\t\t\tactiveEl = _doc.activeElement;\n\t\t\t\ttabKey = event.keyCode === 9;\n\t\t\t\tshiftKey = event.shiftKey;\n\n\t\t\t\tif ( ! shiftKey && tabKey && lastEl === activeEl ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tfirstEl.focus();\n\t\t\t\t}\n\n\t\t\t\tif ( shiftKey && tabKey && firstEl === activeEl ) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tlastEl.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n}; // azad.modalMenu\n\n/*\t-----------------------------------------------------------------------------------------------\n\tPrimary Menu\n--------------------------------------------------------------------------------------------------- */\n\nazad.primaryMenu = {\n\n\tinit: function() {\n\t\tthis.focusMenuWithChildren();\n\t},\n\n\t// The focusMenuWithChildren() function implements Keyboard Navigation in the Primary Menu\n\t// by adding the '.focus' class to all 'li.menu-item-has-children' when the focus is on the 'a' element.\n\tfocusMenuWithChildren: function() {\n\t\t// Get all the link elements within the primary menu.\n\t\tvar links, i, len,\n\t\t\tmenu = document.querySelector( '.primary-menu-wrapper' );\n\n\t\tif ( ! menu ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlinks = menu.getElementsByTagName( 'a' );\n\n\t\t// Each time a menu link is focused or blurred, toggle focus.\n\t\tfor ( i = 0, len = links.length; i < len; i++ ) {\n\t\t\tlinks[i].addEventListener( 'focus', toggleFocus, true );\n\t\t\tlinks[i].addEventListener( 'blur', toggleFocus, true );\n\t\t}\n\n\t\t//Sets or removes the .focus class on an element.\n\t\tfunction toggleFocus() {\n\t\t\tvar self = this;\n\n\t\t\t// Move up through the ancestors of the current link until we hit .primary-menu.\n\t\t\twhile ( -1 === self.className.indexOf( 'primary-menu' ) ) {\n\t\t\t\t// On li elements toggle the class .focus.\n\t\t\t\tif ( 'li' === self.tagName.toLowerCase() ) {\n\t\t\t\t\tif ( -1 !== self.className.indexOf( 'focus' ) ) {\n\t\t\t\t\t\tself.className = self.className.replace( ' focus', '' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.className += ' focus';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tself = self.parentElement;\n\t\t\t}\n\t\t}\n\t}\n}; // azad.primaryMenu\n\n/*\t-----------------------------------------------------------------------------------------------\n\tToggles\n--------------------------------------------------------------------------------------------------- */\n\nazad.toggles = {\n\n\tclickedEl: false,\n\n\tinit: function() {\n\t\t// Do the toggle\n\t\tthis.toggle();\n\n\t\t// Check for toggle/untoggle on resize\n\t\tthis.resizeCheck();\n\n\t\t// Check for untoggle on escape key press\n\t\tthis.untoggleOnEscapeKeyPress();\n\t},\n\n\tperformToggle: function( element, instantly ) {\n\t\tvar target, timeOutTime, classToToggle,\n\t\t\tself = this,\n\t\t\t_doc = document,\n\t\t\t// Get our targets\n\t\t\ttoggle = element,\n\t\t\ttargetString = toggle.dataset.toggleTarget,\n\t\t\tactiveClass = 'active';\n\n\t\t// Elements to focus after modals are closed\n\t\tif ( ! _doc.querySelectorAll( '.show-modal' ).length ) {\n\t\t\tself.clickedEl = _doc.activeElement;\n\t\t}\n\n\t\tif ( targetString === 'next' ) {\n\t\t\ttarget = toggle.nextSibling;\n\t\t} else {\n\t\t\ttarget = _doc.querySelector( targetString );\n\t\t}\n\n\t\t// Trigger events on the toggle targets before they are toggled\n\t\tif ( target.classList.contains( activeClass ) ) {\n\t\t\ttarget.dispatchEvent( azad.createEvent( 'toggle-target-before-active' ) );\n\t\t} else {\n\t\t\ttarget.dispatchEvent( azad.createEvent( 'toggle-target-before-inactive' ) );\n\t\t}\n\n\t\t// Get the class to toggle, if specified\n\t\tclassToToggle = toggle.dataset.classToToggle ? toggle.dataset.classToToggle : activeClass;\n\n\t\t// For cover modals, set a short timeout duration so the class animations have time to play out\n\t\ttimeOutTime = 0;\n\n\t\tif ( target.classList.contains( 'cover-modal' ) ) {\n\t\t\ttimeOutTime = 10;\n\t\t}\n\n\t\tsetTimeout( function() {\n\t\t\tvar focusElement,\n\t\t\t\tsubMenued = target.classList.contains( 'sub-menu' ),\n\t\t\t\tnewTarget = subMenued ? toggle.closest( '.menu-item' ).querySelector( '.sub-menu' ) : target,\n\t\t\t\tduration = toggle.dataset.toggleDuration;\n\n\t\t\t// Toggle the target of the clicked toggle\n\t\t\tif ( toggle.dataset.toggleType === 'slidetoggle' && ! instantly && duration !== '0' ) {\n\t\t\t\tazadMenuToggle( newTarget, duration );\n\t\t\t} else {\n\t\t\t\tnewTarget.classList.toggle( classToToggle );\n\t\t\t}\n\n\t\t\t// If the toggle target is 'next', only give the clicked toggle the active class\n\t\t\tif ( targetString === 'next' ) {\n\t\t\t\ttoggle.classList.toggle( activeClass );\n\t\t\t} else if ( target.classList.contains( 'sub-menu' ) ) {\n\t\t\t\ttoggle.classList.toggle( activeClass );\n\t\t\t} else {\n\t\t\t\t// If not, toggle all toggles with this toggle target\n\t\t\t\t_doc.querySelector( '*[data-toggle-target=\"' + targetString + '\"]' ).classList.toggle( activeClass );\n\t\t\t}\n\n\t\t\t// Toggle aria-expanded on the toggle\n\t\t\tazadToggleAttribute( toggle, 'aria-expanded', 'true', 'false' );\n\n\t\t\tif ( self.clickedEl && -1 !== toggle.getAttribute( 'class' ).indexOf( 'close-' ) ) {\n\t\t\t\tazadToggleAttribute( self.clickedEl, 'aria-expanded', 'true', 'false' );\n\t\t\t}\n\n\t\t\t// Toggle body class\n\t\t\tif ( toggle.dataset.toggleBodyClass ) {\n\t\t\t\t_doc.body.classList.toggle( toggle.dataset.toggleBodyClass );\n\t\t\t}\n\n\t\t\t// Check whether to set focus\n\t\t\tif ( toggle.dataset.setFocus ) {\n\t\t\t\tfocusElement = _doc.querySelector( toggle.dataset.setFocus );\n\n\t\t\t\tif ( focusElement ) {\n\t\t\t\t\tif ( target.classList.contains( activeClass ) ) {\n\t\t\t\t\t\tfocusElement.focus();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfocusElement.blur();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Trigger the toggled event on the toggle target\n\t\t\ttarget.dispatchEvent( azad.createEvent( 'toggled' ) );\n\n\t\t\t// Trigger events on the toggle targets after they are toggled\n\t\t\tif ( target.classList.contains( activeClass ) ) {\n\t\t\t\ttarget.dispatchEvent( azad.createEvent( 'toggle-target-after-active' ) );\n\t\t\t} else {\n\t\t\t\ttarget.dispatchEvent( azad.createEvent( 'toggle-target-after-inactive' ) );\n\t\t\t}\n\t\t}, timeOutTime );\n\t},\n\n\t// Do the toggle\n\ttoggle: function() {\n\t\tvar self = this;\n\n\t\tdocument.querySelectorAll( '*[data-toggle-target]' ).forEach( function( element ) {\n\t\t\telement.addEventListener( 'click', function( event ) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tself.performToggle( element );\n\t\t\t} );\n\t\t} );\n\t},\n\n\t// Check for toggle/untoggle on screen resize\n\tresizeCheck: function() {\n\t\tif ( document.querySelectorAll( '*[data-untoggle-above], *[data-untoggle-below], *[data-toggle-above], *[data-toggle-below]' ).length ) {\n\t\t\twindow.addEventListener( 'resize', function() {\n\t\t\t\tvar winWidth = window.innerWidth,\n\t\t\t\t\ttoggles = document.querySelectorAll( '.toggle' );\n\n\t\t\t\ttoggles.forEach( function( toggle ) {\n\t\t\t\t\tvar unToggleAbove = toggle.dataset.untoggleAbove,\n\t\t\t\t\t\tunToggleBelow = toggle.dataset.untoggleBelow,\n\t\t\t\t\t\ttoggleAbove = toggle.dataset.toggleAbove,\n\t\t\t\t\t\ttoggleBelow = toggle.dataset.toggleBelow;\n\n\t\t\t\t\t// If no width comparison is set, continue\n\t\t\t\t\tif ( ! unToggleAbove && ! unToggleBelow && ! toggleAbove && ! toggleBelow ) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// If the toggle width comparison is true, toggle the toggle\n\t\t\t\t\tif (\n\t\t\t\t\t\t( ( ( unToggleAbove && winWidth > unToggleAbove ) ||\n\t\t\t\t\t\t\t( unToggleBelow && winWidth < unToggleBelow ) ) &&\n\t\t\t\t\t\t\ttoggle.classList.contains( 'active' ) ) ||\n\t\t\t\t\t\t( ( ( toggleAbove && winWidth > toggleAbove ) ||\n\t\t\t\t\t\t\t( toggleBelow && winWidth < toggleBelow ) ) &&\n\t\t\t\t\t\t\t! toggle.classList.contains( 'active' ) )\n\t\t\t\t\t) {\n\t\t\t\t\t\ttoggle.click();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\t},\n\n\t// Close toggle on escape key press\n\tuntoggleOnEscapeKeyPress: function() {\n\t\tdocument.addEventListener( 'keyup', function( event ) {\n\t\t\tif ( event.key === 'Escape' ) {\n\t\t\t\tdocument.querySelectorAll( '*[data-untoggle-on-escape].active' ).forEach( function( element ) {\n\t\t\t\t\tif ( element.classList.contains( 'active' ) ) {\n\t\t\t\t\t\telement.click();\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\t}\n\n}; // azad.toggles\n\n/**\n * Is the DOM ready\n *\n * this implementation is coming from https://gomakethings.com/a-native-javascript-equivalent-of-jquerys-ready-method/\n *\n * @param {Function} fn Callback function to run.\n */\nfunction azadDomReady( fn ) {\n\tif ( typeof fn !== 'function' ) {\n\t\treturn;\n\t}\n\n\tif ( document.readyState === 'interactive' || document.readyState === 'complete' ) {\n\t\treturn fn();\n\t}\n\n\tdocument.addEventListener( 'DOMContentLoaded', fn, false );\n}\n\nazadDomReady( function() {\n\tazad.toggles.init();\t// Handle toggles\n\tazad.coverModals.init();\t// Handle cover modals\n\tazad.intrinsicRatioVideos.init();\t// Retain aspect ratio of videos on window resize\n\tazad.modalMenu.init();\t// Modal Menu\n\tazad.primaryMenu.init();\t// Primary Menu\n\tazad.touchEnabled.init();\t// Add class to body if device is touch-enabled\n} );\n\n/*\t-----------------------------------------------------------------------------------------------\n\tHelper functions\n--------------------------------------------------------------------------------------------------- */\n\n/* Toggle an attribute ----------------------- */\n\nfunction azadToggleAttribute( element, attribute, trueVal, falseVal ) {\n\tif ( trueVal === undefined ) {\n\t\ttrueVal = true;\n\t}\n\tif ( falseVal === undefined ) {\n\t\tfalseVal = false;\n\t}\n\tif ( element.getAttribute( attribute ) !== trueVal ) {\n\t\telement.setAttribute( attribute, trueVal );\n\t} else {\n\t\telement.setAttribute( attribute, falseVal );\n\t}\n}\n\n/**\n * Toggle a menu item on or off.\n *\n * @param {HTMLElement} target\n * @param {number} duration\n */\nfunction azadMenuToggle( target, duration ) {\n\tvar initialParentHeight, finalParentHeight, menu, menuItems, transitionListener,\n\t\tinitialPositions = [],\n\t\tfinalPositions = [];\n\n\tif ( ! target ) {\n\t\treturn;\n\t}\n\n\tmenu = target.closest( '.menu-wrapper' );\n\n\t// Step 1: look at the initial positions of every menu item.\n\tmenuItems = menu.querySelectorAll( '.menu-item' );\n\n\tmenuItems.forEach( function( menuItem, index ) {\n\t\tinitialPositions[ index ] = { x: menuItem.offsetLeft, y: menuItem.offsetTop };\n\t} );\n\tinitialParentHeight = target.parentElement.offsetHeight;\n\n\ttarget.classList.add( 'toggling-target' );\n\n\t// Step 2: toggle target menu item and look at the final positions of every menu item.\n\ttarget.classList.toggle( 'active' );\n\n\tmenuItems.forEach( function( menuItem, index ) {\n\t\tfinalPositions[ index ] = { x: menuItem.offsetLeft, y: menuItem.offsetTop };\n\t} );\n\tfinalParentHeight = target.parentElement.offsetHeight;\n\n\t// Step 3: close target menu item again.\n\t// The whole process happens without giving the browser a chance to render, so it's invisible.\n\ttarget.classList.toggle( 'active' );\n\n\t/*\n\t* Step 4: prepare animation.\n\t* Position all the items with absolute offsets, at the same starting position.\n\t* Shouldn't result in any visual changes if done right.\n\t*/\n\tmenu.classList.add( 'is-toggling' );\n\ttarget.classList.toggle( 'active' );\n\tmenuItems.forEach( function( menuItem, index ) {\n\t\tvar initialPosition = initialPositions[ index ];\n\t\tif ( initialPosition.y === 0 && menuItem.parentElement === target ) {\n\t\t\tinitialPosition.y = initialParentHeight;\n\t\t}\n\t\tmenuItem.style.transform = 'translate(' + initialPosition.x + 'px, ' + initialPosition.y + 'px)';\n\t} );\n\n\t/*\n\t* The double rAF is unfortunately needed, since we're toggling CSS classes, and\n\t* the only way to ensure layout completion here across browsers is to wait twice.\n\t* This just delays the start of the animation by 2 frames and is thus not an issue.\n\t*/\n\trequestAnimationFrame( function() {\n\t\trequestAnimationFrame( function() {\n\t\t\t/*\n\t\t\t* Step 5: start animation by moving everything to final position.\n\t\t\t* All the layout work has already happened, while we were preparing for the animation.\n\t\t\t* The animation now runs entirely in CSS, using cheap CSS properties (opacity and transform)\n\t\t\t* that don't trigger the layout or paint stages.\n\t\t\t*/\n\t\t\tmenu.classList.add( 'is-animating' );\n\t\t\tmenuItems.forEach( function( menuItem, index ) {\n\t\t\t\tvar finalPosition = finalPositions[ index ];\n\t\t\t\tif ( finalPosition.y === 0 && menuItem.parentElement === target ) {\n\t\t\t\t\tfinalPosition.y = finalParentHeight;\n\t\t\t\t}\n\t\t\t\tif ( duration !== undefined ) {\n\t\t\t\t\tmenuItem.style.transitionDuration = duration + 'ms';\n\t\t\t\t}\n\t\t\t\tmenuItem.style.transform = 'translate(' + finalPosition.x + 'px, ' + finalPosition.y + 'px)';\n\t\t\t} );\n\t\t\tif ( duration !== undefined ) {\n\t\t\t\ttarget.style.transitionDuration = duration + 'ms';\n\t\t\t}\n\t\t} );\n\n\t\t// Step 6: finish toggling.\n\t\t// Remove all transient classes when the animation ends.\n\t\ttransitionListener = function() {\n\t\t\tmenu.classList.remove( 'is-animating' );\n\t\t\tmenu.classList.remove( 'is-toggling' );\n\t\t\ttarget.classList.remove( 'toggling-target' );\n\t\t\tmenuItems.forEach( function( menuItem ) {\n\t\t\t\tmenuItem.style.transform = '';\n\t\t\t\tmenuItem.style.transitionDuration = '';\n\t\t\t} );\n\t\t\ttarget.style.transitionDuration = '';\n\t\t\ttarget.removeEventListener( 'transitionend', transitionListener );\n\t\t};\n\n\t\ttarget.addEventListener( 'transitionend', transitionListener );\n\t} );\n}\n\n/**\n * traverses the DOM up to find elements matching the query\n *\n * @param {HTMLElement} target\n * @param {string} query\n * @return {NodeList} parents matching query\n */\nfunction azadFindParents( target, query ) {\n\tvar parents = [];\n\n\t// recursively go up the DOM adding matches to the parents array\n\tfunction traverse( item ) {\n\t\tvar parent = item.parentNode;\n\t\tif ( parent instanceof HTMLElement ) {\n\t\t\tif ( parent.matches( query ) ) {\n\t\t\t\tparents.push( parent );\n\t\t\t}\n\t\t\ttraverse( parent );\n\t\t}\n\t}\n\n\ttraverse( target );\n\n\treturn parents;\n}\n"],"names":["azad","azadDomReady","fn","document","readyState","addEventListener","azadToggleAttribute","element","attribute","trueVal","falseVal","undefined","getAttribute","setAttribute","azadMenuToggle","target","duration","initialParentHeight","finalParentHeight","menu","menuItems","transitionListener","initialPositions","finalPositions","closest","querySelectorAll","forEach","menuItem","index","x","offsetLeft","y","offsetTop","parentElement","offsetHeight","classList","add","toggle","initialPosition","style","transform","requestAnimationFrame","finalPosition","transitionDuration","remove","removeEventListener","azadFindParents","query","parents","traverse","item","parent","parentNode","HTMLElement","matches","push","scrolled","Element","prototype","s","el","this","nodeType","window","NodeList","callback","thisArg","i","len","length","call","createEvent","eventName","event","Event","initEvent","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","ownerDocument","touchEnabled","init","DocumentTouch","join","matchMedia","body","coverModals","querySelector","onToggle","outsideUntoggle","closeOnEscape","hideAndShowModals","modal","contains","setTimeout","tagName","toLowerCase","hash","includes","untoggleModal","getElementById","slice","scrollIntoView","bind","keyCode","preventDefault","_doc","_win","modals","htmlStyle","documentElement","adminBar","getAdminBarHeight","negativeValue","height","currentScroll","pageYOffset","getBoundingClientRect","htmlStyles","overflow-y","innerHeight","position","width","top","left","styles","offsetY","paddingTop","Math","abs","mQuery","Object","keys","styleKey","setProperty","parseInt","clickedEl","toggles","removeProperty","focus","scrollTo","modalTargetClass","modalToggle","dataset","modalTargetString","click","intrinsicRatioVideos","makeFit","video","iTargetWidth","container","origwidth","ratio","offsetWidth","origheight","modalMenu","expandLevel","keepFocusInModal","activeMenuItem","subMenuToggle","performToggle","elements","menuType","activeEl","firstEl","tabKey","shiftKey","toggleTarget","selectors","Array","filter","offsetParent","unshift","bottomMenu","lastEl","activeElement","primaryMenu","focusMenuWithChildren","links","getElementsByTagName","toggleFocus","self","className","indexOf","replace","resizeCheck","untoggleOnEscapeKeyPress","instantly","classToToggle","targetString","activeClass","nextSibling","dispatchEvent","timeOutTime","focusElement","newTarget","toggleDuration","toggleType","toggleBodyClass","setFocus","blur","winWidth","innerWidth","unToggleAbove","untoggleAbove","unToggleBelow","untoggleBelow","toggleAbove","toggleBelow","key"],"mappings":"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"}